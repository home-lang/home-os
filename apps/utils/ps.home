// home-os PS
// Process status utility

import "../../kernel/src/core/foundation.home" as foundation
import "../../kernel/src/core/process.home" as process

export fn ps_main() {
  foundation.vga_clear()
  foundation.vga_write_string("=== Process Status ===\n\n")
  foundation.vga_write_string("PID  PPID  STATE  COMMAND\n")
  foundation.vga_write_string("---  ----  -----  -------\n")
  
  var count: u32 = process.process_get_count()
  
  // List processes (stub)
  var i: u32 = 0
  while i < count {
    foundation.vga_write_string("  1     0  RUN    init\n")
    foundation.vga_write_string("  2     1  SLEEP  kthreadd\n")
    foundation.vga_write_string("  3     1  RUN    shell\n")
    i = i + 3
  }
  
  foundation.vga_write_string("\nTotal: ")
  foundation.vga_write_string(" processes\n")
}
