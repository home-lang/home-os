// home-os Timeout
// Run command with time limit

import "../../kernel/src/core/foundation.home" as foundation
import "../../kernel/src/drivers/timer.home" as timer

export fn timeout_main(seconds: u32, command: u64) {
  foundation.vga_write_string("Running with ")
  foundation.vga_write_string(" second timeout: ")
  foundation.vga_write_string(command)
  foundation.vga_write_string("\n")
  
  var start: u64 = timer.timer_measure_start()
  
  // Execute command with timeout (stub)
  
  var elapsed: u64 = timer.timer_measure_ms(start)
  
  if elapsed >= seconds * 1000 {
    foundation.vga_write_string("\nTimeout reached!\n")
  } else {
    foundation.vga_write_string("\nCompleted\n")
  }
}
