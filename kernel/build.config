# HomeOS Kernel Build Configuration
# Edit this file to enable/disable kernel features
# Run: ./scripts/build-unified.sh --config kernel/build.config

# ============================================================================
# Build Profiles (uncomment one)
# ============================================================================

# Minimal headless - smallest footprint, no GUI, basic networking
#PROFILE=minimal-headless

# Server - networking focus, no GUI, full storage support
#PROFILE=server

# Desktop - full GUI support with all features
PROFILE=desktop

# ============================================================================
# Target Architecture
# ============================================================================

# x86-64 PC
TARGET_ARCH=x86-64

# ARM64 Raspberry Pi 3
#TARGET_ARCH=rpi3

# ARM64 Raspberry Pi 4
#TARGET_ARCH=rpi4

# ARM64 Raspberry Pi 5
#TARGET_ARCH=rpi5

# ============================================================================
# Core Features
# ============================================================================

# Memory Management
FEATURE_MM_ZRAM=yes
FEATURE_MM_SLAB=yes
FEATURE_MM_SWAP=yes
FEATURE_MM_MEMCG=yes
FEATURE_MM_HUGEPAGES=no

# Process Management
FEATURE_PROCESS_SMP=yes
FEATURE_PROCESS_CGROUPS=yes
FEATURE_PROCESS_CONTAINERS=no

# Security
FEATURE_SEC_CAPABILITIES=yes
FEATURE_SEC_SECCOMP=yes
FEATURE_SEC_AUDIT=yes
FEATURE_SEC_SMEP_SMAP=yes
FEATURE_SEC_KASAN=no

# ============================================================================
# Networking
# ============================================================================

FEATURE_NET_TCP=yes
FEATURE_NET_UDP=yes
FEATURE_NET_ICMP=yes
FEATURE_NET_DHCP=yes
FEATURE_NET_DNS=yes
FEATURE_NET_HTTP=yes
FEATURE_NET_TLS=yes
FEATURE_NET_WEBSOCKET=yes
FEATURE_NET_IPV6=no
FEATURE_NET_MQTT=no
FEATURE_NET_NFS=no
FEATURE_NET_SMB=no

# ============================================================================
# File Systems
# ============================================================================

FEATURE_FS_VFS=yes
FEATURE_FS_FAT32=yes
FEATURE_FS_EXT2=yes
FEATURE_FS_TMPFS=yes
FEATURE_FS_PROCFS=yes
FEATURE_FS_SYSFS=yes
FEATURE_FS_DEVFS=yes
FEATURE_FS_BTRFS=no
FEATURE_FS_NTFS=no
FEATURE_FS_ISO9660=no

# ============================================================================
# Hardware Drivers
# ============================================================================

# Storage
FEATURE_DRV_ATA=yes
FEATURE_DRV_AHCI=yes
FEATURE_DRV_NVME=yes
FEATURE_DRV_SDMMC=yes
FEATURE_DRV_RAID=no
FEATURE_DRV_CDROM=no
FEATURE_DRV_FLOPPY=no

# Input
FEATURE_DRV_KEYBOARD=yes
FEATURE_DRV_MOUSE=yes
FEATURE_DRV_TOUCHPAD=no
FEATURE_DRV_TOUCHSCREEN=no
FEATURE_DRV_GAMEPAD=no

# Network
FEATURE_DRV_E1000=yes
FEATURE_DRV_RTL8139=no
FEATURE_DRV_VIRTIO_NET=yes
FEATURE_DRV_WIFI=yes
FEATURE_DRV_BLUETOOTH=no

# USB
FEATURE_DRV_USB_UHCI=yes
FEATURE_DRV_USB_EHCI=yes
FEATURE_DRV_USB_XHCI=yes
FEATURE_DRV_USB_HUB=yes

# Video
FEATURE_DRV_VGA=yes
FEATURE_DRV_FRAMEBUFFER=yes
FEATURE_DRV_GPU=no

# System
FEATURE_DRV_PCI=yes
FEATURE_DRV_ACPI=yes
FEATURE_DRV_RTC=yes
FEATURE_DRV_TIMER=yes
FEATURE_DRV_SERIAL=yes

# Peripherals
FEATURE_DRV_GPIO=yes
FEATURE_DRV_I2C=yes
FEATURE_DRV_SPI=yes
FEATURE_DRV_PWM=no
FEATURE_DRV_AUDIO=no
FEATURE_DRV_CAMERA=no

# Power/Security
FEATURE_DRV_BATTERY=no
FEATURE_DRV_TPM=no
FEATURE_DRV_SENSORS=no

# ============================================================================
# GUI (Craft Desktop)
# ============================================================================

FEATURE_GUI_CRAFT=yes
FEATURE_GUI_COMPOSITOR=yes
FEATURE_GUI_VULKAN=no
FEATURE_GUI_OPENGL=yes

# ============================================================================
# Performance & Debug
# ============================================================================

FEATURE_PERF_BOOT_OPT=yes
FEATURE_PERF_PROFILER=yes
FEATURE_PERF_ASYNC_IO=yes

FEATURE_DEBUG_GDB=yes
FEATURE_DEBUG_PANIC=yes
FEATURE_DEBUG_MEMLEAK=no

# ============================================================================
# Optimization Settings
# ============================================================================

# Release: optimized, no debug symbols
# Debug: no optimization, full debug symbols
# ReleaseSafe: optimized with safety checks
OPTIMIZE=ReleaseSafe

# Strip debug symbols from release builds
STRIP_DEBUG=yes

# Enable Link-Time Optimization
LTO=no

# Target RAM footprint (MB)
TARGET_RAM_MB=256

# Target boot time (ms)
TARGET_BOOT_MS=3000
